
<tr class="<%= cycle("list-odd", "list-even") %> row_highlight" id="tool_<%= tool.id %>">
  <td><%= tool.name %></td>
  <td><%= overlay_description(tool.description) %></td>
  <td><%= tool.category %></td>
  <td><%= link_to_user_with_tooltip(tool.user) %>
  <td><%= link_to_group_if_accessible(tool.group) %></td>
  <td class="left">
    <% tool.bourreaux.sort{|a, b| a.name.casecmp(b.name)}.each do |b| %>
      <% tcs = ToolConfig.where( :bourreau_id => b.id, :tool_id => tool.id ) %>
      <% tcs.reject! { |tc| ! tc.can_be_accessed_by?(current_user) } %>
      <%= link_to_bourreau_if_accessible(b) %>
      <% if tcs.size >= 1 %>
        (<%= pluralize tcs.size, "version" %>)
      <% end %>
      <br/>
    <% end %>
  </td>

  <% if current_user.has_role?(:admin) %>
    <td><%= link_to 'Edit', edit_tool_path(tool), :class  => "action_link" %></td>
    <td>
      <%= 
          delete_button 'Delete', tool_path(tool), :class  => "action_link", 
                                                   :confirm  => "Are you sure you want to delete '#{tool.name}'?", 
                                                   :target  => "#tool_#{tool.id}",
                                                   :target_text  => "<td colspan='12' style='color:red; text-align:center'>Deleting...</td>"
       %>
    </td>
    <td><%= link_to 'Access?', { :controller => :tool_configs, :action => :index, :tool_id => tool.id }, :class => "action_link" %></td>
  <% end %>
    
  <% tool_plain_name = tool.cbrain_task_class.sub(/^CbrainTask::/,"").underscore %>

  <td>
    <% help_path = "/doc/tasks/#{tool_plain_name}_options.html" %>
    <% if File.exist?( Rails.root.to_s + "/public" + help_path ) %>
      <%= overlay_ajax_link "Help", help_path %>
    <% end %>
  </td>
  <td>
    <% info_path = "/doc/tasks/#{tool_plain_name}_info/#{tool_plain_name}_info.html" %>
    <% if File.exist?( Rails.root.to_s + "/public" + info_path ) %>
      <%= overlay_ajax_link "Info", info_path %>
    <% end %>
  </td>
</tr>


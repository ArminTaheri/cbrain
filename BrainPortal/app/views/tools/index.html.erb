<%

#
# CBRAIN Project
#
# Revision_info="$Id$"
#

-%>

<div class = "generalcontent">

<% if current_user.has_role?(:admin) %>
  <div class="resource_list_upper_form">  
    <span title="Registers all subclasses of DrmaaTask as Tools">
      <%= link_to 'Autoload Tools', {:action  => :create, :autoload  => true}, :method  => :post, :class  => "action_link" %>
    </span> <br/>
    <%= link_to 'Tool Management', {:controller => "tools",  :action => "tool_management"}, :class => "action_link" %>
    <br/><br/>
    <%= 
      link_to_function 'Create New Tool', :class  => 'action_link' do |page|
        page['new_tool'].toggle
      end 
    %>
    <div id="new_tool" style="display:none">
      <br>
      <%= render :partial  => 'new' %>
    </div>
  </div> <!-- End class="upper_form" -->
<% end %>

<table class="resource_list" id="tool_table">
  <tr>
    <th>Tool Name</th>
    <th>User</th>
    <th>Group</th>
    <th>Bourreau</th>
    <th>Category</th>
    <% if current_user.has_role?(:admin) %>
      <th colspan="3">Operations</th>
    <% end %>
  </tr>

<% for tool in @tools %>
  <%= render :partial => 'tool_table_row', :locals  => {:tool  => tool} %>
<% end %>
</table>


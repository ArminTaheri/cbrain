<% custom_filter ||= @custom_filter %>
<p>
   Filename:<br>
   
       <%= select :data, :file_name_type, [["Don't filter name", ''], ['Matches', 'match'], ['Contains', 'contain'], ['Begins with', 'begin'], ['Ends with', 'end']], :selected => custom_filter.data["file_name_type"]    %>
       <%= text_field_tag "data[file_name_term]", custom_filter.data["file_name_term"] %>
     
</p>
<p>
   File Format:<br>
   
      <%= select :data, :type, Userfile.descendants.sort_by(&:name).map{ |u| [u.pretty_type, u.name] }, :include_blank  => true, :selected  => custom_filter.data["type"]  %>
   
</p>
<p>
   Filtering by date: <br/> 
   
   <%= render :partial => 'custom_filter_date_selection', :locals  => {:custom_filter  => custom_filter} %> <br/>
</p>
<p>
   Size:<br>
   
       <%= select :data, :size_type, [["Don't filter size", ''], ['=', "0"], ['<', "1"], ['>', "2"]], :selected  => custom_filter.data["size_type"] %>
       <%= text_field_tag "data[size_term]", custom_filter.data["size_term"] %> kb
   
</p>

<p>
   Owner:<br>

      <%= user_select("data[user_id]", { :selector => custom_filter.data["user_id"] }, { :include_blank => true })  %>
</p>

<p>
   Project:<br>
 
       <%= group_select("data[group_id]", { :selector => custom_filter.data["group_id"]}, { :include_blank => true })  %>
 
</p>

<p>
    Data Provider:<br>

       <%= data_provider_select("data[data_provider_id]", { :selector => custom_filter.data["data_provider_id"] || '!' }, { :include_blank => true })  %>

</p> 

<% unless current_user.available_tags.blank? %>
      <p>
         Tags:
         
            <table>
              <% for tag in current_user.available_tags %>
                  <tr class="<%= cycle('list-odd', 'list-even') %>">
                    <td><%= check_box_tag("custom_filter[tag_ids][]", tag.id.to_s, custom_filter.tag_ids.include?(tag.id.to_s)) %></td>
                    <td><%= tag.name -%></td>
                  </tr>
              <% end %>
            </table>
         
      </p>
<% end %>
   

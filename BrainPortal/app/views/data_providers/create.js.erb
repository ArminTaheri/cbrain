<% if @provider.errors.empty? %>
  <%= render :partial  => "shared/flash_update" %>
  jQuery('#<%= @provider.is_browsable? ? "user" : "cbrain" %>_data_provider_table').append(jQuery("<%= escape_javascript(render :partial => "data_provider_table_row", :locals  => {:data_provider  => @provider}) %>"));
  jQuery("#errorExplanation").remove();
  jQuery(".fieldWithErrors").removeClass("fieldWithErrors");
  jQuery('#new_data_provider_button').click();
<% else %>
  jQuery('#new_data_provider').html("<%= escape_javascript(render :partial  => "new") %>");
<% end %>

<%-
#
# CBRAIN Project
#
# Copyright (C) 2008-2012
# The Royal Institution for the Advancement of Learning
# McGill University
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
-%>

<% user_list = current_user.available_users.sort_by(&:login) %>

<div class="btn-group">
  <a href="javascript:;" class="btn btn-primary dropdown-toggle mega-dropdown" role="dropdown" aria-haspopup="true" aria-expanded="false">View Options<span class="caret"></span></a>
  <ul class="dropdown-menu">
    <div class="container-fluid">
      <% if user_list.size > 1 %>
        <li class="dropdown-header">
          Browse as another user:
        </li>
        <li>
          <%=
            ajax_onchange_select(:as_user_id,
              browse_data_provider_path,
              options_for_select(
                user_list.collect { |u| [ u.login, u.id.to_s ] },
                @as_user.id.to_s
              ),
              { :datatype => 'script', :class => "form-control" }
            )
          %>
        </li>
        <li class="divider" role="separator"></li>
      <% end %>


      <li>
        <%=
          ajax_link('Refresh list of files',
            browse_data_provider_path(:refresh => true),
            { :datatype => 'script', :class => "btn btn-primary btn-block mega-dropdown-closer" }
          )
        %>
      </li>
    </div>
  </ul>
</div>














<% title 'Data Providers' %>

<div class="menu_bar menu_bar_left">

  <% if check_role(:admin) || check_role(:site_manager)%>
    <% button_with_dropdown_menu({:title => 'Create New Data Provider', :content_id => 'new_data_provider', :partial => 'new'}, {:id => "new_data_provider_button"}) %>
  <% end %>    

  <%= overlay_ajax_link "Help", "/doc/data_providers/data_provider_info.html", :class  => "button" %>    
</div>
      
<p>
  
<%= show_hide_toggle "Show Details", ".provider_details", :alternate_text  => "Hide Details", :class  => "action_link" %>

<p>
  
<table class="resource_list" id="cbrain_data_provider_table">

  <%= render :partial => 'data_provider_table_headers', :locals => { :table_title => 'Official CBRAIN Storage' } %>

  <% for prov in @providers["CBRAIN Official Storage"].sort_by(&:name) %>
    <%= render :partial => 'data_provider_table_row', :locals  => {:data_provider  => prov} %>
  <% end %>
      
  <% if @providers["CBRAIN Official Storage"].nil? || @providers["CBRAIN Official Storage"].empty? %>
    <tr class="list-odd"><td colspan="13">There are no providers in this list.</td></tr>
  <% end %>

</table>

<P><br>
  
<table class="resource_list" id="user_data_provider_table">

  <%= render :partial => 'data_provider_table_headers', :locals => { :table_title => 'User Storage' } %>

  <% for prov in @providers["User Storage"].sort_by(&:name) %>
    <%= render :partial => 'data_provider_table_row', :locals  => {:data_provider  => prov} %>
  <% end %>

  <% if @providers.nil? || @providers.empty? %>
    <tr class="list-odd"><td colspan="12">There are no providers in this list.</td></tr>
  <% end %>

</table>
   
<P>

<div id="disk_usage">   
  <% on_click_ajax_replace({:url  =>  url_for(:action  => :disk_usage), :position  => :replace, :before  => "<span class='loading_message'>Loading...</span>"}) do %>
    <a href="#" class="action_link">Click here to view disk usage statistics</a>
  <% end %>
</div>



<% title 'Data Provider Info' %>

<h2>Information about Data Provider '<%= h(@provider.name) %>'</h2>

<div class="generalbox">

  <div class="menu_bar menu_bar_left">
    <% if check_role(:admin) || @provider.user_id == current_user.id %>
      <%= link_to 'Edit',   edit_data_provider_path(@provider), :class => "button" %>
      <%= link_to 'Delete', data_provider_path(@provider), { :confirm => 'Are you sure?', :method => :delete, :class => "button" } %>
      <% if @provider.is_browsable? %>
        <%= link_to 'Browse', browse_data_provider_path(@provider), :class => "button" %>
      <% end %>
    <% end %>
  </div>

  <P>

   <table class="property_list">

      <tr>
        <th colspan="2" class="subtitle">Implementation information</th>
      </tr>

      <tr>
          <th>Name</th>
          <td><%= h(@provider.name) %></td>
      </tr>

      <% if check_role(:admin) || @provider.user_id == current_user.id %>

      <tr>
          <th>Class</th>
          <td><%= h(@provider.class.to_s) %></td>
      </tr>

      <tr>
          <th>Revision Info (DataProvider)</th>
          <td><%= h(DataProvider.revision_info.svn_id_pretty_rev_author_date) %></td>
      </tr>

      <tr>
          <th>Revision Info (<%= @provider.class.to_s %>)</th>
          <td><%= h(@provider.revision_info.svn_id_pretty_rev_author_date) %></td>
      </tr>

      <% end %>

      <tr>
          <th>Description</th>
          <td><%= overlay_description(@provider.description) %></td>
      </tr>

      <tr>
        <th colspan="2" class="subtitle">Access information</th>
      </tr>

      <tr>
          <th>Owner</th>
          <td><%= link_to_user_if_accessible(@provider.user) %></td>
      </tr>

      <tr>
          <th>Project</th>
          <td><%= link_to_group_if_accessible(@provider.group) %></td>
      </tr>

      <tr>
          <th>Site</th>
          <td><%= link_to_site_if_accessible(@provider.site) %></td>
      </tr>

      <tr>
          <th>Time Zone</th>
          <td><%= h(@provider.time_zone || "(Unset)") %></td>
      </tr>

      <tr>
          <th>Status</th>
          <td><%= h(@provider.online ? "Online" : "Offline") %></td>
      </tr>

      <tr>
          <th>Mode</th>
          <td><%= h(@provider.read_only ? "Read Only" : "Read/Write") %></td>
      </tr>

      <tr>
          <th>Syncability</th>
          <td><%= h(@provider.not_syncable ? "NOT syncable" : "Fully syncable") %></td>
      </tr>

      <% if check_role(:admin) || @provider.user_id == current_user.id %>

      <tr>
        <th colspan="2" class="subtitle">Network Parameters</th>
      </tr>

      <tr>
          <th>Remote Host</th>
          <td><%= h(@provider.remote_host) %></td>
      </tr>

      <tr>
          <th>Remote User</th>
          <td><%= h(@provider.remote_user) %></td>
      </tr>

      <tr>
          <th>Remote Directory</th>
          <td><%= h(@provider.remote_dir) %></td>
      </tr>

      <tr>
          <th>Remote Port</th>
          <td><%= h(@provider.remote_port) %></td>
      </tr>

      <% end %>

   </table>
   
</div> <!-- End class="generalbox" -->
   
<P>

<div class="generalbox">

   <%= render :partial => 'file_counts',
              :locals => { :fileclasses_totcount => @fileclasses_totcount,
                           :user_fileclass_count => @user_fileclass_count
                         }
   %>

</div>

<% if check_role(:admin) || @provider.user_id == current_user.id %>

<P>

<div class="generalbox">
  <table>
    <tr><th colspan="2">Public SSH Keys for this CBRAIN Portal and all accessible Execution Servers.</th></tr>
    <% @ssh_keys.each do |pair| %>
      <tr><th><%= h(pair[0]) %></th></tr>
      <tr><td><SMALL><SMALL><PRE class="ssh_key"><%= pretty_ssh_key(pair[1]) %></PRE></SMALL></SMALL></td></tr>
    <% end %>
  </table>
</div>

<% end %>



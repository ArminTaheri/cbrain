
<tr class="<%= cycle("list-odd", "list-even") %> row_highlight" id="data_provider_<%= data_provider.id %>">
  <td><%= link_to_data_provider_if_accessible(data_provider) %></td>
  <% if @filter_params["details"] == 'on' %>
    <td><%= link_to_user_with_tooltip(data_provider.user) %></td>
  <% end %>
  <td><%= link_to_group_if_accessible(data_provider.group) %></td>
  <% if @filter_params["details"] == 'on' %>
    <td><%= link_to_site_if_accessible(data_provider.site) %></td>
    <td><%= data_provider.time_zone || "(Unset)" %></td>
  <% end %>
  <% if data_provider.online %>
    <td>Yes</td>
    <%= staggered_loading "td", url_for(:action  => :is_alive, :id  => data_provider.id), :error_message  => "<span class=\"warning\">???</span>" do %>
      <span class="loading_message">Checking...</span>
    <% end %>
  <% else %>
    <td><%= html_colorize("No","red") %></td>
    <td><%= html_colorize("No","red") %></td>
  <% end %>
  <td>
    <% file_count = Userfile.find_all_accessible_by_user(current_user, :conditions => { :data_provider_id => data_provider.id }).count %>
    <% if file_count > 0 %>
      <%= filter_reset_link file_count.to_s, :controller => :userfiles, :filters => { :data_provider_id => data_provider.id }, :ajax => false %>
    <% else %>
      0
    <% end %>
  </td>
  <td><%= data_provider.read_only ? "Read Only" : "Read/Write" %></td>
  <% if @filter_params["details"] == 'on' %>
    <td><%= data_provider.not_syncable ? "NOT syncable" : "Fully syncable" %></td>
    <td><%= overlay_description(data_provider.description) %></td>
  <% end %>
  <td>
     <% if data_provider.has_owner_access?(current_user) %>
     <%= link_to 'Edit', edit_data_provider_path(data_provider), :class => 'action_link' %>
     <% end %>
  </td>
  <td>
     <% if data_provider.has_owner_access?(current_user) %>
       <%= 
           delete_button 'Delete', data_provider_path(data_provider), :class  => "action_link", 
                                                                      :confirm  => "Are you sure you want to delete '#{data_provider.name}' ?", 
                                                                      :target  => "#data_provider_#{data_provider.id}",
                                                                      :target_text  => "<td colspan='11' style='color:red; text-align:center'>Deleting...</td>"
       %>
     <% end %>
  </td>
  <td>
     <% if data_provider.is_browsable? && data_provider.can_be_accessed_by?(current_user) && data_provider.online? %>
     <%= link_to 'Browse', browse_data_provider_path(data_provider), :class => 'action_link' %>
     <% end %>
  </td>
</tr>


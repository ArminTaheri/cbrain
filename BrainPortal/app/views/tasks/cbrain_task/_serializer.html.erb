
<fieldset>
  <legend>List of other tasks under control</legend>

  <ul>
  <% task_ids_enabled = @task.params[:task_ids_enabled] || {} %>
  <% task_ids_enabled.keys.sort { |a,b| a.to_i <=> b.to_i }.each do |tid| %>
  <%   next if tid.blank? %>
  <%   enabled = task_ids_enabled[tid].blank? ? nil : "1" %>
  <%   subtask = CbrainTask.find_by_id(tid) %>
    <li>
      <% if subtask %>
        <%= form.params_check_box "task_ids_enabled[#{tid}]", {}, "1", "0" %>
        <%= link_to_task_if_accessible(subtask, nil, :name => subtask.fullname) %>
        (currently in state <strong><%= subtask.status %></strong>)
      <% else %>
        <%= form.params_check_box "task_ids_enabled[#{tid}]", { :disabled => true }, "1", "0" %>
        (Task #<%= h(tid) %> no longer exists)
      <% end %>
    </li>
  <% end %>
  </ul>

  <p>
  Note: The checkboxes will adjust the task's prerequisites only once a restart is performed.<br/>
  Only the selected tasks will be re-run.
  </p>

</fieldset>



<%-
#
# CBRAIN Project
#
# Copyright (C) 2008-2012
# The Royal Institution for the Advancement of Learning
# McGill University
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.  
#
-%>

<%= form_tag( "/userfiles", :multipart => true, :method => :post) do %>

  Select file to upload:<BR>

  <%= file_field_tag("upload_file") %>

  <P>

  Select tags for file:<BR>
  <select name="tags[]" multiple="multiple">
     <%= options_from_collection_for_select @user_tags, 'id', 'name', {:include_blank => true, :selected => nil}      %>
  </select>

  <% if current_project %>
    <%= hidden_field_tag 'userfile[group_id]', current_project.id %>
  <% else %>
    <P>
    Project for uploaded file:<br>
    <%= group_select 'userfile[group_id]', { :groups => current_user.available_groups, :selector => current_user.own_group } %>
  <% end %>

  <P>

  Project permissions:<BR>
  <%= select(:userfile, :group_writable, [['Read Only', false],['Read/Write', true]]) %>

  <P>

  Archive options (for zip or tar files):<BR>
  <%= select_tag(:archive, options_for_select([['Save file', 'save'],['Create collection', 'collection'], ['Auto-extract', 'extract']])) %>
  <P>
 
  Data provider for uploaded file:<BR>
  <%= data_provider_select :data_provider_id, { :data_providers => @data_providers } %>
  <%= overlay_data_providers_descriptions(@data_providers) %>

  <P>

  <%= submit_tag("Upload file") %>
  
<% end %>


<% 
  if params[:content_loader] == "collection_file" && params[:arguments]
    argument_list = params[:arguments]
    argument_list = [argument_list] unless argument_list.is_a?(Array)
    path = @userfile.collection_file(*argument_list)
  else
    path = @userfile.cache_full_path
  end
%>

<% if path %>
  <% if params[:content_viewer] == "off" %>
    <PRE><%= File.read(path) %></PRE>
  <% else %>
    <%= overlay_content_link "Show Displayable Content", :class => "action_link" do %>
      <PRE><%= File.read(path) %></PRE>
    <% end %>
  <% end %>
<% else %>
  <%= html_colorize("Could not load file contents.") %>
<% end %>
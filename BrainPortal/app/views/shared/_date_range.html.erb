<% 

# List of cache update offsets we support
big_bang = 50.years.to_i # for convenience, because obviously 13.75 billion != 50 ! Fits in signed 32 bits int.

offset_times = [
  [ "Now",               0.seconds.to_s ],
  [ "One hour ago",      1.hour.to_s    ],
  [ "Six hours ago",     6.hour.to_s    ],
  [ "One day ago",       1.day.to_s     ],
  [ "One week ago",      1.week.to_s    ],
  [ "One month ago",     1.month.to_s   ],
  [ "One year ago",      1.year.to_s   ],  
  [ "The Big Bang",      big_bang       ]
]

%>                                           


<div class="date_range_display_table" >

  <!-- First line -->
  <div>
    <%= radio_button_tag date_attribute[0], "", !date_attribute[1] || date_attribute[1] == ""  %> Do not filter
    <%= radio_button_tag date_attribute[0], "created_at", date_attribute[1] == "created_at"    %> By creation date
    <%= radio_button_tag date_attribute[0], "updated_at", date_attribute[1] == "updated_at"    %> By update date
  </div>
  
  <div>
    <!-- from column-->
    <span class="display_cell">
      <div class="centered">From</div>
      <div class="date_range_with_size">
        <%= radio_button_tag absolute_or_relative_from[0], "relative", !absolute_or_relative_from[1] || absolute_or_relative_from[1] == "relative" %> 
        <%= select_tag relative_from[0], options_for_select(offset_times, (relative_from[1] || 1.week).to_i ) %>
      </div>
        
      <div class="date_range_with_size">
        <%= radio_button_tag absolute_or_relative_from[0], "absolute", absolute_or_relative_from[1] == "absolute" %> 
        <%= text_field_tag absolute_from[0],  absolute_from[1], :class => "daterangepicker date_range_txt_with_size", "data-datefieldtype" => "from" %>
      </div>                                                              
    </span>
    
    <!-- to column -->
    <span class="display_cell">
      <div class="centered">To</div>
      <div class="date_range_with_size">
        <%= radio_button_tag absolute_or_relative_to[0],   "relative", !absolute_or_relative_to[1] || absolute_or_relative_to[1]   == "relative" %>
        <%= select_tag relative_to[0],   options_for_select(offset_times, (relative_to[1] || 0).to_i) %>
      </div>
        
      <div class="date_range_with_size">
        <%= radio_button_tag absolute_or_relative_to[0], "absolute", absolute_or_relative_to[1] == "absolute" %> 
        <%= text_field_tag absolute_to[0],  absolute_to[1], :class => "daterangepicker date_range_txt_with_size", "data-datefieldtype" => "to" %>
      </div>
    </span>
  </div>
  
</div>


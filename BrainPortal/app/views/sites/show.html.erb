
<h2>Information about site '<%= @site.name %>'</h2>

<div class="menu_bar menu_bar_left">
  <%= overlay_ajax_link "Help", "/doc/sites/site_info.html", :class  => "button" %>    
</div>

<br>

<table class="property_list show_file_table">
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Description:</th>
     <td><%= overlay_description(@site.description) %></td>
   </tr>
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Managers:</th>
     <td><%= @site.managers.collect(&:login).join(", ") %></td>
   </tr>
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Number of users:</th>
     <td><%= @site.users.count %></td>
   </tr>
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Number of groups:</th>
     <td><%= @site.groups.count %></td>
   </tr>
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Number of files:</th>
     <td><%= @site.userfiles_find_all.count %></td>
   </tr>  
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Number of data providers:</th>
     <td><%= @site.data_providers_find_all.count %></td>
   </tr>
   <tr class="<%= cycle('list-odd', 'list-even') %>">
     <th class="right_align">Number of remote resources:</th>
     <td><%= @site.remote_resources_find_all.count %></td>
   </tr>
</table>

<br>

<table class="resource_list">
  <tr>
    <th>Users</th>
    <th>Projects</th>
    <th>Data Providers</th>
    <th>Remote Resources</th>
  </tr>
  <tr>
    <td><%= @site.users.all.sort{|a, b| a.login.casecmp(b.login)}.map{|u| link_to_user_if_accessible(u)}.join("<br>") %></td>
    <td><%= @site.groups.all.sort{|a, b| a.name.casecmp(b.name)}.map{|g| link_to_group_if_accessible(g)}.join("<br>") %></td>
    <td><%= @site.data_providers_find_all.sort{|a, b| a.name.casecmp(b.name)}.map{|d| link_to_data_provider_if_accessible(d)}.join("<br>") %></td>
    <td><%= @site.remote_resources_find_all.sort{|a, b| a.name.casecmp(b.name)}.map{|r| link_to_bourreau_if_accessible(r)}.join("<br>") %></td>
  </tr>
</table>

<p>

<% if check_role(:admin) %>
  <%= link_to 'Edit', edit_site_path(@site), :class => 'action_link' %><br>
<% end %>

